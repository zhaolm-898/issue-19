(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-564f43eb"],{"0b6b":function(t,e,n){},"0cb2":function(t,e,n){var r=n("7b0b"),i=Math.floor,a="".replace,s=/\$([$&'`]|\d\d?|<[^>]*>)/g,o=/\$([$&'`]|\d\d?)/g;t.exports=function(t,e,n,c,u,l){var f=n+t.length,h=c.length,d=o;return void 0!==u&&(u=r(u),d=s),a.call(l,d,(function(r,a){var s;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(f);case"<":s=u[a.slice(1,-1)];break;default:var o=+a;if(0===o)return r;if(o>h){var l=i(o/10);return 0===l?r:l<=h?void 0===c[l-1]?a.charAt(1):c[l-1]+a.charAt(1):r}s=c[o-1]}return void 0===s?"":s}))}},"25f0":function(t,e,n){"use strict";var r=n("6eeb"),i=n("825a"),a=n("d039"),s=n("ad6d"),o="toString",c=RegExp.prototype,u=c[o],l=a((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),f=u.name!=o;(l||f)&&r(RegExp.prototype,o,(function(){var t=i(this),e=String(t.source),n=t.flags,r=String(void 0===n&&t instanceof RegExp&&!("flags"in c)?s.call(t):n);return"/"+e+"/"+r}),{unsafe:!0})},"2d3b":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search"},[n("div",{staticClass:"search-head"},[n("NavBar",[n("van-icon",{attrs:{slot:"left",name:"arrow-left",size:"20",color:"#fff"},on:{click:function(e){return t.$router.go(-1)}},slot:"left"}),n("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v("搜索")])],1),n("van-search",{attrs:{"show-action":"",placeholder:t.placeholder},on:{search:t.onSearch,input:t.onInput,clear:t.clear},scopedSlots:t._u([t.showList?{key:"action",fn:function(){return[n("div",{on:{click:function(e){return t.onSearch(t.value)}}},[t._v("搜索")])]},proxy:!0}:{key:"action",fn:function(){return[t.show?n("van-icon",{attrs:{name:"shopping-cart-o",size:"20px"}}):n("van-icon",{attrs:{name:"shopping-cart-o",size:"20px",badge:t.badge},on:{click:function(e){return t.$router.push("/shopping")}}})]},proxy:!0}],null,!0),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t.likeList.length&&t.showList?n("div",{staticClass:"search-list"},[n("van-list",t._l(t.likeList,(function(e){return n("van-cell",{key:e,on:{click:function(n){return t.onSearch(e)}}},[[n("span",{staticClass:"like-result",domProps:{innerHTML:t._s(t.formatHTML(e))}})]],2)})),1)],1):t._e(),t.showList?t._e():n("div",{staticClass:"goods-list"},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了","immediate-check":!1},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.GoodsList,(function(e,r){return n("GoodsCard",t._b({key:r,attrs:{count:t.counterMap[e.id]}},"GoodsCard",e,!1))})),1)],1),t.likeList.length<=0&&t.showList?n("div",{staticClass:"history"},[n("MyHistory",{attrs:{searchList:t.searchList}})],1):t._e()])},i=[],a=n("2909"),s=n("1da1"),o=n("5530"),c=(n("96cf"),n("13d5"),n("07ac"),n("4d63"),n("ac1f"),n("25f0"),n("5319"),n("9767"),n("7db0"),n("841c"),n("99af"),n("2f62")),u=n("d178"),l=n("458a"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"myHistory"},[n("h4",[t._v("历史记录：")]),t._l(t.searchList,(function(e){return n("div",{key:e.time,staticClass:"item"},[t._v(t._s(e.value))])}))],2)},h=[],d={props:{searchList:{default:function(){return[]}}}},v=d,p=(n("82b9"),n("2877")),g=Object(p["a"])(v,f,h,!1,null,"7c83db8e",null),b=g.exports,m=n("365c"),L={data:function(){return{placeholder:"请输入搜索关键词",value:this.placeholder,timer:null,likeList:[],loading:!1,finished:!1,page:1,size:5,GoodsList:[],showList:!0,total:0,searchList:[]}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["counterMap"])),{},{badge:function(){var t=Object.values(this.counterMap).reduce((function(t,e){return t+e}),0);return t>99?"99+":t},show:function(){var t=Object.values(this.counterMap).reduce((function(t,e){return t+e}),0);return!(t>0)}}),watch:{value:function(){""===this.value&&(this.showList=!0)}},components:{NavBar:u["a"],GoodsCard:l["a"],MyHistory:b},methods:{clear:function(){this.showList=!0},formatHTML:function(t){var e=new RegExp(this.value,"g");return t.replace(e,this.value.fontcolor("red"))},onSearch:function(t){var e=this;t&&(this.value=t);var n=this.searchList.find((function(t){return t.value===e.value}));n?(n.time=(new Date).getTime(),this.searchList.sort((function(t,e){return e.time-t.time}))):(this.searchList.unshift({value:this.value,time:(new Date).getTime()}),this.searchList.length>10&&this.searchList.pop()),localStorage.setItem("searchList",JSON.stringify(this.searchList)),this.likeList=[],this.page=1,this.finished=!1,this.onLoad(),this.showList=!1},onInput:function(){var t=this;""!==this.value?this.timer?(clearTimeout(this.timer),this.timer=null):this.timer=setTimeout(Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].likeSearch(t.value);case 2:n=e.sent,t.likeList=n.result,clearTimeout(t.timer),t.timer=null;case 6:case"end":return e.stop()}}),e)}))),800):this.likeList=[]},onLoad:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].search(t.value,t.page,t.size);case 2:n=e.sent,t.GoodsList=[].concat(Object(a["a"])(t.GoodsList),Object(a["a"])(n.list)),t.total=n.total,t.loading=!1,t.GoodsList.length>t.total?t.finished=!0:t.page+=1;case 7:case"end":return e.stop()}}),e)})))()}},created:function(){this.searchList=JSON.parse(localStorage.getItem("searchList"))||[]}},w=L,x=(n("63ae"),Object(p["a"])(w,r,i,!1,null,"3084b2b6",null));e["default"]=x.exports},"4d63":function(t,e,n){var r=n("83ab"),i=n("da84"),a=n("94ca"),s=n("7156"),o=n("9bf2").f,c=n("241c").f,u=n("44e7"),l=n("ad6d"),f=n("9f7f"),h=n("6eeb"),d=n("d039"),v=n("69f3").set,p=n("2626"),g=n("b622"),b=g("match"),m=i.RegExp,L=m.prototype,w=/a/g,x=/a/g,k=new m(w)!==w,y=f.UNSUPPORTED_Y,S=r&&a("RegExp",!k||y||d((function(){return x[b]=!1,m(w)!=w||m(x)==x||"/a/i"!=m(w,"i")})));if(S){var _=function(t,e){var n,r=this instanceof _,i=u(t),a=void 0===e;if(!r&&i&&t.constructor===_&&a)return t;k?i&&!a&&(t=t.source):t instanceof _&&(a&&(e=l.call(t)),t=t.source),y&&(n=!!e&&e.indexOf("y")>-1,n&&(e=e.replace(/y/g,"")));var o=s(k?new m(t,e):m(t,e),r?this:L,_);return y&&n&&v(o,{sticky:n}),o},E=function(t){t in _||o(_,t,{configurable:!0,get:function(){return m[t]},set:function(e){m[t]=e}})},R=c(m),C=0;while(R.length>C)E(R[C++]);L.constructor=_,_.prototype=L,h(i,"RegExp",_)}p("RegExp")},5319:function(t,e,n){"use strict";var r=n("d784"),i=n("825a"),a=n("50c4"),s=n("a691"),o=n("1d80"),c=n("8aa5"),u=n("0cb2"),l=n("14c3"),f=Math.max,h=Math.min,d=function(t){return void 0===t?t:String(t)};r("replace",2,(function(t,e,n,r){var v=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,p=r.REPLACE_KEEPS_$0,g=v?"$":"$0";return[function(n,r){var i=o(this),a=void 0==n?void 0:n[t];return void 0!==a?a.call(n,i,r):e.call(String(i),n,r)},function(t,r){if(!v&&p||"string"===typeof r&&-1===r.indexOf(g)){var o=n(e,t,this,r);if(o.done)return o.value}var b=i(t),m=String(this),L="function"===typeof r;L||(r=String(r));var w=b.global;if(w){var x=b.unicode;b.lastIndex=0}var k=[];while(1){var y=l(b,m);if(null===y)break;if(k.push(y),!w)break;var S=String(y[0]);""===S&&(b.lastIndex=c(m,a(b.lastIndex),x))}for(var _="",E=0,R=0;R<k.length;R++){y=k[R];for(var C=String(y[0]),O=f(h(s(y.index),m.length),0),T=[],$=1;$<y.length;$++)T.push(d(y[$]));var M=y.groups;if(L){var j=[C].concat(T,O,m);void 0!==M&&j.push(M);var A=String(r.apply(void 0,j))}else A=u(C,m,O,T,M,r);O>=E&&(_+=m.slice(E,O)+A,E=O+C.length)}return _+m.slice(E)}]}))},"5a8d":function(t,e,n){},"63ae":function(t,e,n){"use strict";n("0b6b")},7156:function(t,e,n){var r=n("861d"),i=n("d2bb");t.exports=function(t,e,n){var a,s;return i&&"function"==typeof(a=e.constructor)&&a!==n&&r(s=a.prototype)&&s!==n.prototype&&i(t,s),t}},"7db0":function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").find,a=n("44d2"),s="find",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),r({target:"Array",proto:!0,forced:o},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a(s)},"82b9":function(t,e,n){"use strict";n("5a8d")},"857a":function(t,e,n){var r=n("1d80"),i=/"/g;t.exports=function(t,e,n,a){var s=String(r(t)),o="<"+e;return""!==n&&(o+=" "+n+'="'+String(a).replace(i,"&quot;")+'"'),o+">"+s+"</"+e+">"}},"8aa5":function(t,e,n){"use strict";var r=n("6547").charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},9767:function(t,e,n){"use strict";var r=n("23e7"),i=n("857a"),a=n("af03");r({target:"String",proto:!0,forced:a("fontcolor")},{fontcolor:function(t){return i(this,"font","color",t)}})},af03:function(t,e,n){var r=n("d039");t.exports=function(t){return r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}}}]);
//# sourceMappingURL=chunk-564f43eb.49b7e488.js.map